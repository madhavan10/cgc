<script src="/fullcalendar-5.6.0/lib/main.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var getNextDate = function (aDateString) {
            var nextDate = new Date(aDateString); 
            nextDate.setDate(nextDate.getDate() + 1);
            var months = ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
            var nd_month_str = months[nextDate.getMonth()];
            var nd_day = nextDate.getDate();
            var nd_day_str;
            if (nd_day < 10) {
                nd_day_str = "0" + nd_day;
            } else {
                nd_day_str = "" + nd_day;
            }
            var nd_year = nextDate.getFullYear();
            return nd_month_str + "/" + nd_day_str + "/" + nd_year; 
        };
        var cgcEvents = [];
        //getting events
        for(var i = 0; i < window.festivals.length; i++) {
            var thisEvent = JSON.parse(window.festivals[i]._rawJSON);
            cgcEvents.push({
                title: thisEvent.eventName,
                start: Date.parse(thisEvent.startDate),
                end: Date.parse(getNextDate(thisEvent.endDate)), //end-date is exclusive
                allDay: true,
                //temporary url
                url: "/festivals/" + thisEvent.eventName
            });
        }
        var calendarElt = document.getElementById("calendar");
        var calendar = new FullCalendar.Calendar(calendarElt, {
            initialView: "dayGridMonth",
            headerToolbar: {
                left: "prev,next today",
                center: "title",
                right: "dayGridMonth, dayGridWeek"
            },
            events: cgcEvents
        });
        calendar.render();
    });
</script>

<div id="gcm-home-page">
    <div id="calendar"></div>
</div>
 
